# NextJs

### Index
- [Dynamic Routing](#dynamic-routing)
- [Route groups](#route-groups)
- [Error handling](#error-handling)
- [Seach engine optimization (SEO) in nextjs](#seach-engine-optimization-in-nextjs)
- [Catch all routes [...rest]](#catch-all-routes)
- [Catch all [[...all]]](#catch-all)
- [Static Site Generation](#static-site-generation)
- [Hydration](#hydration)

### Dynamic Routing

- If we have a users list and for each user we have a profile page, we can use dynamic routing to create a page for each user. Without create seperate pages for each user.
- To make a dynamic route, we need to make a folder like `[username]` or `[id]` whare `[username]` is the name of the parameter.
- And inside that folder we have a page.tsx file whare we have access to the parameter. like this in the params prop `{params} : {params : {username : string}}`
- In the route we can access the dynamic data like this -

```ts
export async function GET(
  request: Request,
  context: { params: { id: string } }
) {
  const id = Number(context.params.id);

  const book = books.find((book) => book.id === id);

  return Response.json(book);
}
```

### Route groups

- Route groups are used to group routes together.
- We can use route groups to create a layout for a group of routes. Like diff header for dashboard and other.
- To make a route group, we need to make a folder like `(dashboard)` or `(root)`.
- Inside then we have a layout.tsx file. and other folder like `post` or `users`.
- This folder will not be visible in the route.

```
app -> (dashboard) -> post -> page.tsx
This is available at -> http://localhost:3000/post
```

### Error handling

- To handle errors we can use the `error.tsx` file.
- It will be place beside the page.tsx file.
- If will be rendered if if there is error.

### Seach engine optimization (SEO) in nextjs

- How to use metadata to optimize your site for search engines.
- There are two ways to set metadata.
  1. config based -> we have to make a js obejct side layout or any other pages and export it
  ```ts
  export const metadata: Metadata = {
    title: "Hello World",
    description: "Generated by create next app",
  };
  ```
  - Next js will automatically add this metadata to our site.
  - Dynamic metadata -> we can make a dynamic metadata with a async function `getMetadata`
    wich will take the dynamic id or somthing and return the metadata. we can then set the metadata to metatdata object;
  2. File based meatadata -> we have to make diff file like favicon.ico, robots.txt etc. and nextjs will automatically add this metadata to our site.
  - File based metadata have higher priority than config based metadata.

### Catch all routes 
- [...rest]
- We can use catch all routes.
- So irrespective of the params, the page.tsx inside [...rest] will catch all the routes in an array.
- So it will catch all the routes like this -
```
app -> blog --> [...id] -> page.tsx
it can catch http://localhost:3000/blog/1/5/6 -> [1, 5, 6] array
```

```
http://localhost:3000/post/9/jhbhb/656/66/323
Rest{"postId":"9","rest":["jhbhb","656","66","323"]}
```
### Catch all 
- [[...all]]
- This will catch all the routes with the parent folder route.
```
App -> blog -> [[...all]] -> page.tsx
This will catch http://localhost:3000/blog and all the route after that like http://localhost:3000/blog/1/5/6 
```

### Static Site Generation
- Those file which will never change like about page, should be generate once.
- We dont want to presure the server to generate those files.
- NextJs automatically figures out which files are static and which are not. and then generates them.
- So if we have a about folder with page.tsx then when build the project, nextjs will generate the about.html file which is static.

### Hydration
- In nextjs client side components are also rendered on the server and html is sent to the client.
- But it has to be hydraited to make it work like itractivity like onClik handler. 
- So the html got imidiately sent to the client and then page.js render on the client in html.